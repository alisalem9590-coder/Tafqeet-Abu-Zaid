<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>محرك أبو زيد | ABU ZAID Engine</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="logo.png" type="image/png">
    <link rel="apple-touch-icon" href="logo.png">
    <meta name="theme-color" content="#0f172a">
    <link href="https://fonts.googleapis.com/css2?family=Almarai:wght@400;700;800&family=Amiri:wght@700&family=IBM+Plex+Sans+Arabic:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-dark: #0f172a; --card-dark: rgba(30, 41, 59, 0.8);
            --accent: #fbbf24; --text: #f8fafc;
        }
        body { margin:0; font-family: 'Almarai', sans-serif; background: var(--bg-dark); color: var(--text); min-height: 100vh; }
        .container { max-width: 900px; margin: auto; padding: 20px; text-align: center; }
        .branding { font-family: 'Amiri', serif; font-size: 35px; color: var(--accent); margin-bottom: 10px; }
        
        .info-bar { display: flex; justify-content: space-between; border-bottom: 1px solid rgba(255,255,255,0.1); padding: 10px 0; margin-bottom: 20px; font-size: 0.9rem; }
        .clock { font-size: 2.5rem; font-weight: 800; color: #fff; margin: 15px 0; }

        .input-area { background: var(--card-dark); padding: 30px; border-radius: 24px; border: 1px solid rgba(251, 191, 36, 0.3); margin-bottom: 20px; }
        input, select { 
            width: 100%; padding: 15px; margin: 10px 0; border-radius: 12px; border: none; 
            font-size: 1.2rem; font-weight: bold; text-align: center; font-family: 'IBM Plex Sans Arabic';
        }
        .btn { 
            background: var(--accent); color: #000; padding: 15px 40px; border-radius: 50px; 
            border: none; font-weight: 800; cursor: pointer; font-size: 1.1rem; transition: 0.3s;
        }
        .btn:hover { transform: translateY(-3px); box-shadow: 0 5px 15px rgba(251, 191, 36, 0.4); }

        .result-card { 
            background: rgba(255,255,255,0.05); padding: 25px; border-radius: 20px; 
            text-align: right; margin-top: 20px; border-right: 5px solid var(--accent); display: none;
        }
        .result-card h3 { color: var(--accent); margin-top: 0; }
        .lang-box { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .lang-label { font-size: 0.8rem; opacity: 0.7; display: block; }
        .text-out { font-family: 'Amiri', serif; font-size: 1.6rem; color: #fff; }
        
        #toast { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background: #10b981; padding: 10px 30px; border-radius: 50px; display: none; }
    </style>
</head>
<body>

<div id="toast">تم النسخ ✅</div>

<div class="container">
    <div class="branding">أَبُو زَيْد | ABU ZAID</div>
    
    <div class="info-bar">
        <div id="hijri">جاري التحميل...</div>
        <div id="gregorian">جاري التحميل...</div>
    </div>

    <div class="clock" id="clock">00:00:00</div>

    <div class="input-area">
        <input type="number" id="amountInput" placeholder="أدخل المبلغ (مثال: 1234.56)" step="0.01">
        <select id="currencySelect">
            </select>
        <button class="btn" onclick="processTafqeet()">تـفـقـيـط الـآن</button>
    </div>

    <div id="resultArea" class="result-card">
        <div class="lang-box" onclick="copyText('arOut')">
            <span class="lang-label">باللغة العربية:</span>
            <div id="arOut" class="text-out">--</div>
        </div>
        <div class="lang-box" onclick="copyText('enOut')">
            <span class="lang-label">In English:</span>
            <div id="enOut" class="text-out" dir="ltr" style="text-align: left; font-family: sans-serif; font-size: 1.2rem;">--</div>
        </div>
        <div class="lang-box" onclick="copyText('frOut')">
            <span class="lang-label">En Français:</span>
            <div id="frOut" class="text-out" dir="ltr" style="text-align: left; font-family: sans-serif; font-size: 1.2rem;">--</div>
        </div>
    </div>

    <div style="margin-top: 30px; opacity: 0.5; font-family: 'Amiri'; font-size: 1.2rem;">
        تصميم وتطوير: أَبُو زَيْد | 2026
    </div>
</div>

<script>
// --- بيانات المحرك (من كود بايثون المختار) ---
const CURRENCIES = {
    "EGP": { name: "الجنيه المصري", unit: {m:"جنيه", d:"جنيهان", p:"جنيهات", t:"جنيهًا", g:"m"}, sub: {m:"قرش", d:"قرشان", p:"قروش", t:"قرشًا", g:"m"}, en: ["Pound", "Pounds", "Piastre", "Piastres"], fr: ["Livre", "Livres", "Piastre", "Piastres"] },
    "SAR": { name: "الريال السعودي", unit: {m:"ريال", d:"ريالان", p:"ريالات", t:"ريالًا", g:"m"}, sub: {m:"هللة", d:"هللتان", p:"هللات", t:"هللةً", g:"f"}, en: ["Riyal", "Riyals", "Halala", "Halalas"], fr: ["Riyal", "Riyals", "Halala", "Halalas"] },
    "USD": { name: "الدولار الأمريكي", unit: {m:"دولار", d:"دولاران", p:"دولارات", t:"دولارًا", g:"m"}, sub: {m:"سنت", d:"سنتان", p:"سنتات", t:"سنتًا", g:"m"}, en: ["Dollar", "Dollars", "Cent", "Cents"], fr: ["Dollar", "Dollars", "Centime", "Centimes"] },
    "EUR": { name: "اليورو الأوروبي", unit: {m:"يورو", d:"يوروان", p:"يوروهات", t:"يوروًا", g:"m"}, sub: {m:"سنت", d:"سنتان", p:"سنتات", t:"سنتًا", g:"m"}, en: ["Euro", "Euros", "Cent", "Cents"], fr: ["Euro", "Euros", "Centime", "Centimes"] },
    "KWD": { name: "الدينار الكويتي", unit: {m:"دينار", d:"ديناران", p:"دنانير", t:"دينارًا", g:"m"}, sub: {m:"فلس", d:"فلسان", p:"فلوس", t:"فلسًا", g:"m"}, en: ["Dinar", "Dinars", "Fils", "Fils"], fr: ["Dinar", "Dinars", "Fils", "Fils"] }
};

const AR_ONES = {
    m: ["صفر", "واحد", "اثنان", "ثلاثة", "أربعة", "خمسة", "ستة", "سبعة", "ثمانية", "تسعة", "عشرة", "أحد عشر", "اثنا عشر"],
    f: ["صفر", "واحدة", "اثنتان", "ثلاث", "أربع", "خمس", "ست", "سبع", "ثمان", "تسع", "عشر", "إحدى عشرة", "اثنتا عشرة"]
};

// --- منطق التفقيط العربي المحترف ---
function arNumberToWords(n, gender = 'm') {
    if (n <= 12) return AR_ONES[gender][n];
    if (n < 20) return (gender === 'm' ? AR_ONES['m'][n-10] + " عشر" : AR_ONES['f'][n-10] + " عشرة");
    if (n < 100) {
        const tens = ["", "", "عشرون", "ثلاثون", "أربعون", "خمسون", "ستون", "سبعون", "ثمانون", "تسعون"];
        const t = Math.floor(n / 10), o = n % 10;
        return o === 0 ? tens[t] : AR_ONES[gender][o] + " و" + tens[t];
    }
    if (n < 1000) {
        const hunds = ["", "مائة", "مائتان", "ثلاثمائة", "أربعمائة", "خمسمائة", "ستمائة", "سبعمائة", "ثمانمائة", "تسعمائة"];
        const h = Math.floor(n / 100), r = n % 100;
        return r === 0 ? hunds[h] : hunds[h] + " و" + arNumberToWords(r, gender);
    }
    return n.toString(); // للأرقام الضخمة جداً
}

function tafqitAR(major, minor, cur) {
    let parts = [];
    if (major > 0) {
        let text = "";
        if (major === 1) text = cur.unit.m;
        else if (major === 2) text = cur.unit.d;
        else if (major >= 3 && major <= 10) text = arNumberToWords(major, cur.unit.g) + " " + cur.unit.p;
        else text = arNumberToWords(major, cur.unit.g) + " " + cur.unit.t;
        parts.push(text);
    }
    if (minor > 0) {
        let text = "";
        if (minor === 1) text = cur.sub.m;
        else if (minor === 2) text = cur.sub.d;
        else if (minor >= 3 && minor <= 10) text = arNumberToWords(minor, cur.sub.g) + " " + cur.sub.p;
        else text = arNumberToWords(minor, cur.sub.g) + " " + cur.sub.t;
        parts.push(text);
    }
    return "فقط " + parts.join(" و") + " لا غير";
}

// --- وظائف الواجهة ---
function processTafqeet() {
    const val = document.getElementById('amountInput').value;
    const code = document.getElementById('currencySelect').value;
    if (!val) return;

    const major = Math.floor(val);
    const minor = Math.round((val - major) * 100);
    const cur = CURRENCIES[code];

    document.getElementById('arOut').innerText = tafqitAR(major, minor, cur);
    document.getElementById('enOut').innerText = `Only ${major} ${major === 1 ? cur.en[0] : cur.en[1]} and ${minor} ${minor === 1 ? cur.en[2] : cur.en[3]} only.`;
    document.getElementById('frOut').innerText = `Seulement ${major} ${major === 1 ? cur.fr[0] : cur.fr[1]} et ${minor} ${minor === 1 ? cur.fr[2] : cur.fr[3]} seulement.`;
    
    document.getElementById('resultArea').style.display = 'block';
}

function copyText(id) {
    const txt = document.getElementById(id).innerText;
    navigator.clipboard.writeText(txt);
    const t = document.getElementById('toast');
    t.style.display = 'block';
    setTimeout(() => t.style.display = 'none', 1500);
}

// --- تحديث البيانات الفورية ---
function init() {
    const sel = document.getElementById('currencySelect');
    for (let c in CURRENCIES) {
        let opt = document.createElement('option');
        opt.value = c;
        opt.text = CURRENCIES[c].name;
        sel.add(opt);
    }

    setInterval(() => {
        const now = new Date();
        document.getElementById('clock').innerText = now.toLocaleTimeString('ar-EG');
        document.getElementById('gregorian').innerText = now.toLocaleDateString('ar-EG', {weekday:'long', day:'numeric', month:'long', year:'numeric'});
        document.getElementById('hijri').innerText = now.toLocaleDateString('ar-SA-u-ca-islamic-umalqura', {day:'numeric', month:'long', year:'numeric'}) + " هـ";
    }, 1000);
}

init();
</script>
</body>
</html>
